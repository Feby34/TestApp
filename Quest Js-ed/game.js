function init(){showStatusVisible(!1),$("#button-restart").button().click(function(){$("#button-restart").removeClass("ui-state-focus ui-state-hover"),uiDoRestart()}),$("#button-undo").button().click(function(){$("#button-undo").removeClass("ui-state-focus ui-state-hover"),uiDoUndo()}),$("#button-wait").button().click(function(){$("#button-wait").removeClass("ui-state-focus ui-state-hover"),uiDoWait()}),$("#button-test").button().click(function(){$("#button-test").removeClass("ui-state-focus ui-state-hover"),reportError("test error")}),$("#button-options").button().click(function(){$("#button-options").removeClass("ui-state-focus ui-state-hover"),$("#gameMore").hide(),$("#gameOptions").show()}),$("#fontOptions").change(function(){var n=$("#fontOptions option:selected").text();$("#divOutput div span").css("font-family",n),$("#fontSample").css("font-family",n),currentFont=n,set(GetObject("game"),"defaultfont",n),saveGame()}),$("#fontSize").change(function(){var n=$("#fontSize option:selected").val();$("#divOutput div span").css("font-size",n+"pt"),$("#fontSample").css("font-size",n+"pt"),currentFontSize=n,set(GetObject("game"),"defaultfontsize",parseInt(n)),saveGame()});$(document).on("click",".elementmenu",function(n){if(!$(this).hasClass("disabled"))return n.preventDefault(),n.stopPropagation(),$(this).blur(),!1});$(document).on("click",".exitlink",function(){$(this).hasClass("disabled")||sendCommand($(this).data("command"))});$(document).on("click",".commandlink",function(){var n=$(this);!n.hasClass("disabled")&&canSendCommand&&(n.data("deactivateonclick")&&(n.addClass("disabled"),n.data("deactivated",!0)),sendCommand(n.data("command")))});worldmodelInitialise(),loadGame()||worldModelBeginGame()}function extLink(n){window.open(n,"_system")}function showStatusVisible(n){n?($("#statusVars").show(),$("#statusLabel").show()):($("#statusVars").hide(),$("#statusLabel").hide())}function scrollToEnd(){scrollTimeout!=null&&clearTimeout(scrollTimeout),scrollTimeout=setTimeout(function(){scrollTimeout=null,scrollToEndNow()},200)}function scrollToEndNow(){$("html, body").animate({scrollTop:beginningOfCurrentTurnScrollPosition-30},200)}function updateLocation(){}function beginWait(){if(runningWalkthrough){awaitingCallback=!1,waitCallback(),TryFinishTurn();return}_waitMode=!0,waitButtonId++,addText('<a class="cmdlink" style="color:'+currentLinkForeground+";font-family:"+currentFont+";font-size:"+currentFontSize+'pt;" id="waitButton'+waitButtonId+'" >Continue...<\/a><br/><br/>'),$("#waitButton"+waitButtonId).click(function(){_waitMode=!1,$(this).hide(),$("#divCommand").show(),beginningOfCurrentTurnScrollPosition=$("#gameContent").height(),window.setTimeout(function(){awaitingCallback=!1,waitCallback(),TryFinishTurn()},100)}),$("#divCommand").hide()}function beginPause(n){_pauseMode=!0,$("#divCommand").hide(),window.setTimeout(function(){endPause()},n)}function endPause(){_pauseMode=!1,$("#divCommand").show(),window.setTimeout(function(){},100)}function globalKey(){if(_waitMode){endWait();return}}function commandKey(n){switch(keyPressCode(n)){case 13:return runCommand(),!1;case 38:thisCommand--,thisCommand==0&&(thisCommand=numCommands),$("#txtCommand").val(commandsList[thisCommand]);break;case 40:thisCommand++,thisCommand>numCommands&&(thisCommand=1),$("#txtCommand").val(commandsList[thisCommand]);break;case 27:thisCommand=numCommands+1,$("#txtCommand").val("")}}function runCommand(){var n=$("#txtCommand").val();n.length>0&&(numCommands++,commandsList[numCommands]=n,thisCommand=numCommands+1,sendCommand(n),$("#txtCommand").val(""))}function prepareCommand(){}function showQuestion(n){$("#msgboxCaption").html(n);var t={modal:!0,autoOpen:!1,buttons:[{text:"Yes",click:function(){msgboxSubmit("yes")}},{text:"No",click:function(){msgboxSubmit("no")}}],closeOnEscape:!1,open:function(){$(".ui-dialog-titlebar-close").hide()}};$("#msgbox").dialog(t),$("#msgbox").dialog("open")}function msgboxSubmit(){$("#msgbox").dialog("close"),window.setTimeout(function(){},100)}function showMenu(n,t,i){$("#dialogOptions").empty(),$.each(t,function(n,t){$("#dialogOptions").append($("<option/>").attr("value",n).text(t))}),$("#dialogCaption").html(n);var r={modal:!0,autoOpen:!1,buttons:[{text:"Select",click:function(){dialogSelect()}}]};i?(r.buttons=r.buttons.concat([{text:"Cancel",click:function(){dialogCancel()}}]),r.close=function(){dialogClose()}):(r.closeOnEscape=!1,r.open=function(){$(".ui-dialog-titlebar-close").hide()}),_menuSelection="",$("#dialog").dialog(r),$("#dialog").dialog("open")}function dialogSelect(){_menuSelection=$("#dialogOptions").val(),_menuSelection.length>0&&($("#dialog").dialog("close"),window.setTimeout(function(){SetMenuSelection(_menuSelection),updateLists()},100))}function dialogCancel(){$("#dialog").dialog("close")}function dialogClose(){_menuSelection.length==0&&dialogSendCancel()}function dialogSendCancel(){window.setTimeout(function(){},100)}function sessionTimeout(){disableInterface()}function gameFinished(){disableInterface()}function disableInterface(){$("#divCommand").hide(),$("#gamePanesRunning").hide(),$("#gamePanesFinished").show()}function playWav(){}function playMp3(n,t,i){playAudio(n,"mp3",t,i)}function playAudio(){}function stopAudio(){}function finishSync(){_waitingForSoundToFinish=!1,window.setTimeout(function(){$("#divCommand").show(),$("#fldUIMsg").val("endwait"),$("#cmdSubmit").click()},100)}function panesVisible(n){n?$("#gamePanes").show():$("#gamePanes").hide()}function uiShow(n){n!=""&&$(n).show()}function uiHide(n){n!=""&&$(n).hide()}function updateList(n,t){var i="",r="",u,f;n=="inventory"&&(i="#inventoryList",r="#inventoryEmpty"),n=="placesobjects"&&(i="#objectsList",r="#placesObjectsEmpty"),$(i).empty(),$(i).show(),u=0,f=!1,$.each(t,function(t,r){var s=r.split(":"),e=s[0],h=s[1],o;(n=="inventory"||$.inArray(e,_compassDirs)==-1)&&(u++,lastPaneLinkId++,o="paneLink"+lastPaneLinkId,$(i).append('<li id="'+o+'" href="#">'+e+"<\/li>"),bindMenu(o,h,e,!1),f=!0)}),$(i+" li:last-child").addClass("last-child"),u==0&&$(i).hide(),f?$(r).hide():$(r).show()}function updateCompass(n){updateDir(n,"NW",_compassDirs[0]),updateDir(n,"N",_compassDirs[1]),updateDir(n,"NE",_compassDirs[2]),updateDir(n,"W",_compassDirs[3]),updateDir(n,"E",_compassDirs[4]),updateDir(n,"SW",_compassDirs[5]),updateDir(n,"S",_compassDirs[6]),updateDir(n,"SE",_compassDirs[7]),updateDir(n,"U",_compassDirs[8]),updateDir(n,"D",_compassDirs[9]),updateDir(n,"In",_compassDirs[10]),updateDir(n,"Out",_compassDirs[11])}function updateDir(n,t,i){$("#cmdCompass"+t).attr("disabled",$.inArray(i,n)==-1)}function compassClick(n){sendCommand(n)}function sendCommand(n){if(gameRunning){if(awaitingInputCallback){awaitingInputCallback=!1,awaitingCallback=!1,getinputCallback(n);return}if(!awaitingCallback&&(beginningOfCurrentTurnScrollPosition=$("#gameContent").height(),!_pauseMode&&!_waitingForSoundToFinish)){if(_waitMode){endWait();return}window.setTimeout(function(){n.substring(0,4)=="dbg "?runDebugCommand(n.substring(4)):n.substring(0,6)=="cheat "?runCheatCode(n.substring(6)):sendCommandInternal(n)},100)}}}function sendCommandInternal(n){var t=+new Date,i;addToCommandLog(n),HandleCommand(n),i=+new Date-t,TryFinishTurn()}function addToCommandLog(n){commandLog==null&&(commandLog=[]),commandLog.push(n)}function runCheatCode(n){var t=window.object_main;t.steps.indexOf("label:"+n)>-1?runWalkthrough("main",0,0,n):sendCommandInternal("cheat "+n)}function runDebugCommand(n){var t,u,i,r,f;if(msg("Debug command: "+n),n.substring(0,2)=="w "&&(walkthroughUndoTest=!1,runWalkthrough(n.substring(2),0,0,"")),n.substring(0,3)=="wu "&&(walkthroughUndoTest=!0,walkthroughUndoSteps=100,runWalkthrough(n.substring(3),0,0,"")),n.substring(0,3)=="wm "&&(walkthroughUndoTest=!1,t=n.substring(3).split(" ",2),runWalkthrough(t[1],0,parseInt(t[0]),"")),n.substring(0,3)=="wr "&&(walkthroughUndoTest=!1,t=n.substring(3).split(" ",3),runWalkthrough(t[2],parseInt(t[0]),parseInt(t[1]),"")),n=="log"&&generateSaveLog(function(n,t,i){msg(n.name+"."+t+"="+i)}),n=="parent")for(u in allObjects)if(i=allObjects[u],i._children){r="";for(f in i._children)r+=i._children[f].name+",";msg(i.name+": "+r)}else msg(i.name+": no children")}function generateSaveLog(n){var t=[];t.push(GetObject("game")),generateSaveLogForArray(t,n),generateSaveLogForArray(allObjects,n),generateSaveLogForArray(allExits,n),generateSaveLogForArray(allCommands,n),generateSaveLogForArray(allTurnScripts,n),generateSaveLogForArray(allTimers,n),thisTurnModifiedItems=[]}function generateSaveLogForArray(n,t){var i,u,o,r,f,e,s;for(e in n){if(i=n[e],u=i.__modified,u!=undefined)for(o in u)r=u[o],t(i,r,i[r]);for(r in i)if(f=i[r],typeof f=="object")for(e in thisTurnModifiedItems)if(s=thisTurnModifiedItems[e],f===s){markAttributeModified(i,r),t(i,r,f);break}}}function saveGame(){gameRunning&&(awaitingCallback||runningWalkthrough||setTimeout(function(){var n=+new Date,t;saveGameInternal(),t=+new Date-n},250))}function saveGameInternal(){var t,i,r,u,n;if(gameRunning&&!awaitingCallback&&localStorage)try{localStorageTransactionId=localStorage.getItem("transaction"),localStorageTransactionId=localStorageTransactionId==undefined?1:3-localStorageTransactionId,localStorageSet("output",allOutput),localStorageSet("output2",$("#divOutput").html()),localStorageSet("divCount",_divCount),commandLog!=null&&localStorageSet("commandLog",commandLog.join(";")),localStorageSet("nextObjectId",nextObjectId),t=0;for(n in createdObjects)t++,localStorageSet("create"+t,createdObjects[n]);localStorageSet("numCreates",t),i=0;for(n in addedTypes)i++,localStorageSet("addtype"+i,addedTypes[n]);localStorageSet("numAddTypes",i),r=0,generateSaveLog(function(n,t,i){var h=TypeOf(i),f,e,s,u,o;if(n.name!="player"||!StartsWith(t,"currentcommand")){r++,f="change"+r,e=i;switch(h){case"stringlist":e=i.length,u=0;for(s in i)localStorageSet(f+"_"+u,i[s]),u++;break;case"objectlist":e=i.length,u=0;for(s in i)localStorageSet(f+"_"+u,i[s]._js_name),u++;break;case"stringdictionary":case"scriptdictionary":u=0;for(o in i)localStorageSet(f+"_k"+u,o),localStorageSet(f+"_v"+u,i[o]),u++;e=u;break;case"objectdictionary":u=0;for(o in i)localStorageSet(f+"_k"+u,o),localStorageSet(f+"_v"+u,i[o]._js_name),u++;e=u;break;case"object":e=i._js_name;break;case"null":e=""}localStorageSet(f,n._js_name+"."+t+"="+h+":"+e)}}),localStorageSet("numChanges",r),u=0;for(n in destroyedObjects)u++,localStorageSet("destroy"+u,destroyedObjects[n]);localStorageSet("numDestroys",u),localStorage.setItem("transaction",localStorageTransactionId)}catch(f){reportError("Failed to save game: "+f)}}function loadGame(){var h,l,c,a,r,v,e,t,o,s,b,n,u;if(!localStorage||(localStorageTransactionId=localStorage.getItem("transaction"),localStorageTransactionId==undefined))return!1;try{for(nextObjectId=parseInt(localStorageGet("nextObjectId")),h=localStorageGet("commandLog"),h!=null&&(commandLog=h.split(";")),addToCommandLog("* loaded game"),l=localStorageGet("numCreates"),n=1;n<=l;n++){u=localStorageGet("create"+n),r=u.split(";");switch(r[2]){case"object":c=allObjects;break;case"exit":c=allExits;break;case"timer":break;case"turnscript":break;default:throw"Unhandled create object type "+r[2];}r[2]=="timer"?createtimer(r[0]):r[2]=="turnscript"?createturnscript(r[0]):createInternal(r[0],c,GetObject(r[1]),r[2])}for(a=localStorageGet("numAddTypes"),n=1;n<=a;n++)u=localStorageGet("addtype"+n),r=u.split(";"),addTypeToObject(window[r[0]],window[r[1]]);for(v=localStorageGet("numChanges"),n=1;n<=v;n++){var u=localStorageGet("change"+n),y=u.indexOf("."),p=u.indexOf("="),w=u.indexOf(":"),k=u.substring(0,y),d=u.substring(y+1,p),g=u.substring(p+1,w),f=u.substring(w+1),nt=window[k],i=f;switch(g){case"script":eval("_temp_assignfn="+f),i=_temp_assignfn;break;case"stringlist":for(e=parseInt(f),i=[],t=0;t<e;t++)i.push(localStorageGet("change"+n+"_"+t));break;case"objectlist":for(e=parseInt(f),i=[],t=0;t<e;t++)i.push(window[localStorageGet("change"+n+"_"+t)]);break;case"stringdictionary":for(e=parseInt(f),i={},t=0;t<e;t++)o=localStorageGet("change"+n+"_k"+t),s=localStorageGet("change"+n+"_v"+t),i[o]=s;break;case"objectdictionary":for(e=parseInt(f),i={},t=0;t<e;t++)o=localStorageGet("change"+n+"_k"+t),s=localStorageGet("change"+n+"_v"+t),i[o]=window[s];break;case"scriptdictionary":for(e=parseInt(f),i={},t=0;t<e;t++)o=localStorageGet("change"+n+"_k"+t),s=localStorageGet("change"+n+"_v"+t),eval("_temp_assignfn="+s),i[o]=_temp_assignfn;break;case"object":i=window[f];break;case"null":i=null;break;case"int":i=parseInt(f);break;case"double":i=parseFloat(f);break;case"boolean":i=f=="true"}set(nt,d,i,!1)}for(b=localStorageGet("numDestroys"),n=1;n<=b;n++)u=localStorageGet("destroy"+n),destroy(u);return currentFont=GetObject("game").defaultfont,$("#fontOptions").val(currentFont),currentFontSize=GetObject("game").defaultfontsize.toString(),$("#fontSize").val(currentFontSize),$("#fontSample").css("font-family",currentFont),$("#fontSample").css("font-size",currentFontSize+"pt"),clearScreen(),_divCount=localStorageGet("divCount"),$("#divOutput").html(localStorageGet("output2")),msg(localStorageGet("output")),beginningOfCurrentTurnScrollPosition=$("#gameContent").height(),scrollToEnd(),updateLists(),!0}catch(tt){return reportError("Failed to load game: "+tt),!1}}function localStorageSet(n,t){localStorage.setItem("c"+localStorageTransactionId+n,t)}function localStorageGet(n){return lastRead=n,localStorage.getItem("c"+localStorageTransactionId+n)}function runWalkthrough(n,t,i,r){msg("Running walkthrough "+n),stepCount=0,walkthroughUndoStage=1,walkthroughMaxSteps=i,walkthroughFinishCode=r;var u=getElement(n);u?(currentWalkthroughSteps=addWalkthroughSteps(u),currentWalkthroughSteps.splice(0,t),runningWalkthrough=!0,runWalkthroughSteps()):msg("No walkthrough of that name")}function addWalkthroughSteps(n){var t=[];return n.parent!=null&&(t=t.concat(addWalkthroughSteps(n.parent))),t=t.concat(n.steps)}function runWalkthroughSteps(){var n,t,i;if(walkthroughUndoTest&&(walkthroughUndoStage==1&&walkthroughUndoSteps==stepCount&&walkthroughUndoStage++,walkthroughUndoStage==2)){stepCount>0?(stepCount--,sendCommandInternal("undo"),setTimeout(function(){runWalkthroughSteps()},100)):msg("Finished undoing walkthrough steps");return}if(currentWalkthroughSteps==null||currentWalkthroughSteps.length==0||walkthroughMaxSteps>0&&stepCount>=walkthroughMaxSteps){msg("Finished running walkthrough"),runningWalkthrough=!1,saveGame();return}if(n=currentWalkthroughSteps.splice(0,1)[0],n=="label:"+walkthroughFinishCode){runningWalkthrough=!1,saveGame();return}if(msg(""),StartsWith(n,"assert:"))if(t=n.substring(7),msg("<b>Assert: <\/b>"+t),eval(t))msg('<span style="color:green"><b>Pass<\/b><\/span>');else{msg('<span style="color:red"><b>Failed<\/b><\/span>');return}else StartsWith(n,"label:")||(stepCount++,console.log("*** WALKTHROUGH STEP "+stepCount+" ***"),console.log("Command: "+n),beginningOfCurrentTurnScrollPosition=$("#gameContent").height(),sendCommandInternal(n),scrollToEndNow());while(postStep)i=postStep,postStep=null,i();setTimeout(function(){runWalkthroughSteps()},100)}function updateStatus(n){n.length>0?(showStatusVisible(!0),$("#statusVars").html(n.replace(/\n/g,"<br/>"))):showStatusVisible(!1)}function setBackground(n){$("#divOutput").css("background-color",n),$("#gamePanel").css("background-color",n)}function ASLEvent(n,t){var i=window[n];i.apply(null,[t])}function disableMainScrollbar(){$("#divOutput").css("overflow","hidden")}function stopTimer(){clearInterval(tmrTick)}function getTickCountAndStopTimer(){return stopTimer(),tickCount}function goUrl(n){window.open(n)}function setCompassDirections(n){_compassDirs=n,$("#cmdCompassNW").attr("title",_compassDirs[0]),$("#cmdCompassN").attr("title",_compassDirs[1]),$("#cmdCompassNE").attr("title",_compassDirs[2]),$("#cmdCompassW").attr("title",_compassDirs[3]),$("#cmdCompassE").attr("title",_compassDirs[4]),$("#cmdCompassSW").attr("title",_compassDirs[5]),$("#cmdCompassS").attr("title",_compassDirs[6]),$("#cmdCompassSE").attr("title",_compassDirs[7]),$("#cmdCompassU").attr("title",_compassDirs[8]),$("#cmdCompassD").attr("title",_compassDirs[9]),$("#cmdCompassIn").attr("title",_compassDirs[10]),$("#cmdCompassOut").attr("title",_compassDirs[11])}function setInterfaceString(n,t){switch(n){case"InventoryLabel":$("#inventoryLabel").html(t);break;case"PlacesObjectsLabel":$("#placesObjectsLabel").html(t);break;case"CompassLabel":$("#compassLabel").html(t);break;case"InButtonLabel":$("#cmdCompassIn").attr("value",t);break;case"OutButtonLabel":$("#cmdCompassOut").attr("value",t)}}function updateVerbButtons(n,t,i){var e=n.prop("selectedIndex"),o=t[e].split("/"),u=1,r,f;for($.each(o,function(){var n=$("#"+i+u);n.attr("value",this),n.show(),u++}),r=u;r<=verbButtonCount;r++)f=$("#"+i+r),f.hide()}function setCommandBarStyle(n){var t=$("#txtCommand").width();$("#txtCommand").attr("style",n),$("#txtCommand").width(t)}function addText(n){_currentDiv==null&&createNewDiv("left"),_currentDiv.append(n),scrollToEnd()}function createNewDiv(n){_divCount++,$("<div/>",{id:"divOutputAlign"+_divCount,style:"text-align: "+n}).appendTo("#divOutput"),_currentDiv=$("#divOutputAlign"+_divCount)}function bindMenu(n,t,i){var f=t.split("/"),u=[];$.each(f,function(n,t){u=u.concat({title:t,action:{type:"fn",callback:"doMenuClick('"+t.toLowerCase()+" "+i.replace("'","\\'")+"');"}})}),$("#"+n).jjmenu("both",u,{},{show:"fadeIn",speed:100,xposition:"left",yposition:"auto",orientation:"auto"})}function doMenuClick(n){$("div[id^=jjmenu]").remove(),sendCommand(n)}function updateObjectLinks(n){$(".elementmenu").each(function(t,i){var r=$(i),u=n[r.data("elementid")];u?(r.removeClass("disabled"),r.data("verbs",u),r.attr("data-verbs",u)):r.addClass("disabled")})}function updateExitLinks(n){$(".exitlink").each(function(t,i){var r=$(i),u=r.data("elementid"),f=$.inArray(u,n)>-1;f?r.removeClass("disabled"):r.addClass("disabled")})}function updateCommandLinks(n){$(".commandlink").each(function(t,i){var r=$(i),u=r.data("elementid"),f=$.inArray(u,n)>-1;f?r.removeClass("disabled"):r.addClass("disabled")})}function disableAllCommandLinks(){$(".commandlink").each(function(n,t){$(t).addClass("disabled")})}function clearScreen(){allOutput="",$("#divOutput").html(""),createNewDiv("left"),beginningOfCurrentTurnScrollPosition=0}function keyPressCode(n){var t;return window.event?t=n.keyCode:n.which&&(t=n.which),t}function AddYouTube(n){var t='<object width="425" height="344"><param name="movie" value="http://www.youtube.com/v/'+n+'"><\/param><param name="allowFullScreen" value="true"><\/param><param name="allowscriptaccess" value="always"><\/param><embed src="http://www.youtube.com/v/'+n+'" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="344"><\/embed><\/object>';addText(t)}function AddVimeo(n){var t='<object width="400" height="225"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id='+n+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" /><embed src="http://vimeo.com/moogaloop.swf?clip_id='+n+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="400" height="225"><\/embed><\/object>';addText(t)}function SetMenuBackground(n){var t=getCSSRule("div.jj_menu_item");t&&(t.style.backgroundColor=n)}function SetMenuForeground(n){var t=getCSSRule("div.jj_menu_item");t&&(t.style.color=n)}function SetMenuHoverBackground(n){var t=getCSSRule("div.jj_menu_item_hover");t&&(t.style.backgroundColor=n)}function SetMenuHoverForeground(n){var t=getCSSRule("div.jj_menu_item_hover");t&&(t.style.color=n)}function SetMenuFontName(n){var t=getCSSRule("div.jjmenu");t&&(t.style.fontFamily=n)}function SetMenuFontSize(){}function TurnOffHyperlinksUnderline(){var n=getCSSRule("a.cmdlink");n&&(n.style.textDecoration="none")}function JsStartOutputSection(n){$.inArray(n,_outputSections)==-1&&(_outputSections.push(n),createNewDiv("left"))}function JsEndOutputSection(n){var t=$.inArray(n,_outputSections);t!=-1&&(_outputSections.splice(t,1),createNewDiv("left"))}function JsHideOutputSection(n){EndOutputSection(n),$("."+n+" a").attr("onclick",""),setTimeout(function(){$("."+n).hide(250,function(){$(this).remove()})},250)}function getCSSRule(n,t){var f;if(n=n.toLowerCase(),document.styleSheets)for(f=0;f<document.styleSheets.length;f++){var i=document.styleSheets[f],u=0,r=!1;do{if(i.cssRules?r=i.cssRules[u]:i.rules&&(r=i.rules[u]),r&&typeof r.selectorText!="undefined"&&r.selectorText.toLowerCase()==n)return t=="delete"?(i.cssRules?i.deleteRule(u):i.removeRule(u),!0):r;u++}while(r)}return!1}function killCSSRule(n){return getCSSRule(n,"delete")}function addCSSRule(n){return document.styleSheets&&(getCSSRule(n)||(document.styleSheets[0].addRule?document.styleSheets[0].addRule(n,null,0):document.styleSheets[0].insertRule(n+" { }",0))),getCSSRule(n)}function uiDoRestart(){localStorage&&localStorage.clear(),window.location.reload()}function reportError(n){alert(n),console.log(n)}function worldmodelInitialise(){var t,n;resolveObjectReferences(),GetObject("game").timeelapsed=0;for(t in allTimers)n=allTimers[t],n.enabled&&(n.trigger=n.interval);setObjectChildAttributes(),typeof InitInterface=="function"&&InitInterface(),updateLists(),tmrTick=setInterval(function(){timerTick()},1e3)}function worldModelBeginGame(){StartGame(),TryRunOnReadyScripts(),updateLists()}function resolveObjectReferences(){var n,t;for(t in objectReferences)n=objectReferences[t],window[n[0]][n[1]]=window[n[2]];for(t in objectListReferences){var n=objectListReferences[t],i=window[n[0]],r=n[1].replace(/ /g,"___SPACE___"),u=n[2];typeof i[r]=="undefined"&&(i[r]=[]),i[r].push(window[u])}for(t in objectDictionaryReferences){var n=objectDictionaryReferences[t],i=window[n[0]],r=n[1].replace(/ /g,"___SPACE___"),f=n[2],u=n[3];typeof i[r]=="undefined"&&(i[r]={}),i[r][f]=window[u]}}function setObjectChildAttributes(){var t,n;for(t in allObjects)n=allObjects[t],n.parent&&addChildObject(n.parent,n)}function addChildObject(n,t){n._children||(n._children=[]),n._children.push(t)}function updateLists(){setTimeout(function(){updateListsInternal()},1e3)}function updateListsInternal(){updateObjectsLists(),updateExitsList(),typeof UpdateStatusAttributes=="function"&&UpdateStatusAttributes()}function updateObjectsLists(){updateObjectsList("GetPlacesObjectsList","placesobjects"),updateObjectsList("ScopeInventory","inventory")}function updateObjectsList(n,t){var i=window[n](),u,r,f,e;n=="GetPlacesObjectsList"&&(i=i.concat(ScopeExits())),u=[];for(r in i)f=t=="inventory"?i[r].inventoryverbs:i[r].displayverbs,e=f!=undefined?f.join("/"):"",u.push(GetDisplayAlias(i[r])+":"+e);updateList(t,u)}function updateExitsList(){var n=ScopeExits(),t=[],i;for(i in n)t.push(n[i].alias);updateCompass(t)}function attributeChanged(n,t,i){if(markAttributeModified(n,t),i){var r="changed"+t;typeof n[r]=="function"&&n[r]()}}function getUniqueId(){return nextObjectId++,"dynid"+nextObjectId}function preAttributeChange(n,t,i){var f,e,r,u;if(currentTransaction!=undefined&&(f=n[t],e=t=="parent"?function(){i=n[t],n[t]=f,objectMoved(n,i,f)}:function(){n[t]=f},currentTransaction.undolist.push(e)),r=TypeOf(i),r=="stringdictionary"||r=="objectdictionary"||r=="scriptdictionary"){u={};for(key in i)u[key]=i[key];return u}if(r=="objectlist"||r=="stringlist"){u=[];for(idx in i)u.push(i[idx]);return u}return i}function markAttributeModified(n,t){n.__modified==undefined&&(n.__modified=[]),n.__modified.indexOf(t)==-1&&n.__modified.push(t)}function markModified(n){thisTurnModifiedItems.indexOf(n)==-1&&thisTurnModifiedItems.push(n)}function addMethod(n,t,i){var r=n[t];n[t]=function(){return i.length==arguments.length?i.apply(this,arguments):typeof r=="function"?r.apply(this,arguments):void 0}}function msg(n){OutputText(n)}function listadd(n,t){if(currentTransaction!=undefined){var i=function(){n.splice(n.length-1,1)};currentTransaction.undolist.push(i)}n.push(t),markModified(n)}function listremove(n,t){var i=n.indexOf(t),r;i!=-1&&(currentTransaction!=undefined&&(r=function(){listadd(n,t)},currentTransaction.undolist.push(r)),n.splice(i,1)),markModified(n)}function dictionaryadd(n,t,i){var r,u;currentTransaction!=undefined&&(r=n[t],u=r!=undefined?function(){n[t]=r}:function(){delete n[t]},currentTransaction.undolist.push(u)),n[t]=i,markModified(n)}function dictionaryremove(n,t){if(currentTransaction!=undefined){var i=n[t],r=function(){n[t]=i};currentTransaction.undolist.push(r)}delete n[t],markModified(n)}function request(n,t){switch(n){case"UpdateLocation":updateLocation(t);break;case"SetStatus":updateStatus(t);break;case"SetInterfaceString":var i=t.split("="),r=i[0],u=i[1];setInterfaceString(r,u);break;case"SetCompassDirections":setCompassDirections(t.split(";"));break;case"Show":uiShow(requestShowHide_GetElement(t));break;case"Hide":uiHide(requestShowHide_GetElement(t));break;case"Foreground":currentForeground=t;break;case"Background":setBackground(t);break;case"LinkForeground":currentLinkForeground=t;break;case"FontName":currentFont=t;break;case"FontSize":currentFontSize=t;break;case"ClearScreen":clearScreen();break;case"SetPanelContents":setPanelContents(t);break;case"Log":break;case"Speak":break;default:throw"Request not supported: "+n+"; "+t;}}function requestShowHide_GetElement(n){switch(n){case"Panes":return"#gamePanes";case"Location":return"#location";case"Command":return"#divCommand";default:return""}}function setPanelHeight(){setTimeout(function(){var n=$("#gamePanel").height();$("#gamePanel").html()==""?(n=0,$("#gamePanel").hide()):$("#gamePanel").show(),$("#gamePanelSpacer").height(n),scrollToEnd()},100)}function setPanelContents(n){$("#gamePanel").html(n),setPanelHeight()}function starttransaction(n){var t=currentTransaction;currentTransaction={},transactions.push(currentTransaction),currentTransaction.undolist=[],currentTransaction.previous=t,currentTransaction.command=n}function undo(){var n,t;if(currentTransaction){n=currentTransaction,dynamicTemplates.UndoTurn?msg(overloadedFunctions.DynamicTemplate("UndoTurn",n.command)):msg("Undo: "+n.command),currentTransaction=undefined,n.undolist.reverse();for(idx in n.undolist)t=n.undolist[idx],t();currentTransaction=n.previous}else templates.NothingToUndo?msg(templates.NothingToUndo):msg("Nothing to undo")}function runscriptattribute2(n,t){var i=GetAttribute(n,t);i.call(n)}function runscriptattribute3(n,t,i){var r=GetAttribute(n,t);r.call(n,i)}function invoke(n,t){t?n.apply(null,[t.result]):n()}function error(n){throw n;}function set(n,t,i,r){var u,f;r===undefined&&(r=!0),t=t.replace(/ /g,"___SPACE___"),u=n[t]!=i,i=preAttributeChange(n,t,i),t=="parent"&&(f=n[t]),n[t]=i,u&&(t=="parent"&&objectMoved(n,f,i),attributeChanged(n,t,r))}function objectMoved(n,t,i){if(n.elementtype=="object"&&n.type=="object"){if(t){var r=t._children.indexOf(n);if(r==-1)throw"Object wasn't in room!";t._children.splice(r,1)}i&&(i._children||(i._children=[]),i._children.push(n))}}function showmenu_async(n,t,i,r){showmenu_async_internal(n,t,i,r,!0)}function showmenu_async_internal(n,t,i,r,u){var h,o,s,f,e;if(menuOptions=t,menuCallback=r,awaitingCallback=!0,finishTurnAfterSelection=u,runningWalkthrough)if(h=currentWalkthroughSteps.splice(0,1),o=h[0],o.substring(0,5)=="menu:"){s=o.substring(5),f="";for(e in t)msg(t[e]),t[e]==s&&(f=e);f.length==0?msg("Error running walkthrough - menu response was not present in menu"):postStep=function(){msg(" - "+s),SetMenuSelection(f)}}else msg("Error running walkthrough - expected menu response");else showMenu(n,t,i)}function ask(n,t){var r,i,u;runningWalkthrough?(r=currentWalkthroughSteps.splice(0,1),i=r[0],i.substring(0,7)=="answer:"?(awaitingCallback=!0,postStep=function(){awaitingCallback=!1,t(i.substring(7)=="yes"),TryFinishTurn()}):msg("Error running walkthrough - expected ask response")):(u=confirm(n),t(u),TryFinishTurn())}function wait_async(n){waitCallback=n,awaitingCallback=!0,beginWait()}function getinput_async(n){getinputCallback=n,awaitingCallback=!0,awaitingInputCallback=!0}function create(n){createInternal(n,allObjects,GetObject("defaultobject"),"object")}function createexit(n,t,i){var r=createInternal(getUniqueId(),allExits,GetObject("defaultexit"),"exit");return set(r,"alias",n),set(r,"parent",t),set(r,"to",i),r}function createexit_withtype(n,t,i,r){var u=createexit(n,t,i);r&&addTypeToObject(u,r)}function createtimer(n){if(createdObjects.push(n+";;timer"),currentTransaction!=undefined){var t=function(){destroy(n)};currentTransaction.undolist.push(t)}return newObject={},window["object_"+n]=newObject,allTimers.push(newObject),newObject.elementtype="timer",newObject.name=n,newObject._js_name=n,newObject}function createturnscript(n){return createInternal(n,allTurnScripts,"defaultturnscript","turnscript")}function createInternal(n,t,i,r){if(createdObjects.push(n+";"+i.name+";"+r),currentTransaction!=undefined){var u=function(){destroy(n)};currentTransaction.undolist.push(u)}return newObject={},window[n]=newObject,objectsNameMap[n]=newObject,elementsNameMap[n]=newObject,t.push(newObject),newObject.elementtype="object",newObject.name=n,newObject._js_name=n,newObject.type=r,addTypeToObject_NoLog(newObject,i),newObject}function addTypeToObject(n,t){addedTypes.push(n.name+";"+t.name),addTypeToObject_NoLog(n,t)}function addTypeToObject_NoLog(n,t){if(t!=undefined)for(var i in t)n[i]==undefined&&(n[i]=t[i])}function destroy(n){destroyedObjects.push(n),destroyObject(GetObject(n))}function destroyObject(n){var t=[],r,i,u,f;for(r in allObjects)i=allObjects[r],i.parent==n&&t.push(i);for(u in t)destroyObject(t[u]);destroyObject_removeFromArray(n,allObjects),destroyObject_removeFromArray(n,allExits),destroyObject_removeFromArray(n,allCommands),destroyObject_removeFromArray(n,allTurnScripts),currentTransaction!=undefined&&(f=function(){delete n.__destroyed},currentTransaction.undolist.push(f)),n.__destroyed=!0}function destroyObject_removeFromArray(n,t){var i=$.inArray(n,t),r;i!=-1&&(currentTransaction!=undefined&&(r=function(){t.push(n)},currentTransaction.undolist.push(r)),t.splice(i,1))}function insertHtml(n){addText(embeddedHtml[n])}function picture(n){msg('<img src="'+n+'" onload="scrollToEnd();" /><br />')}function playsound(n,t,i){playMp3(n,t,i)}function stopsound(){stopAudio()}function pauseEvent(){gameActive=!1}function resumeEvent(){gameActive=!0}function timerTick(){var t,i,r,n;if(gameRunning&&gameActive){t=GetObject("game").timeelapsed+1,set(GetObject("game"),"timeelapsed",t),i=!1;for(r in allTimers)n=allTimers[r],n.enabled&&t>=n.trigger&&(set(n,"trigger",n.trigger+n.interval),n.script(),i=!0);i&&(saveGame(),updateLists())}}function finish(){gameRunning=!1,localStorage&&localStorage.clear(),$("#divCommand").hide()}function on_ready(n){awaitingCallback?onReadyCallback=n:n()}function getElement(n){return elementsNameMap[n]}function setGameWidth(){}function setGamePadding(){}function hideBorder(){}function NewObjectList(){return[]}function NewStringList(){return[]}function NewDictionary(){return{}}function NewObjectDictionary(){return{}}function NewStringDictionary(){return{}}function ToString(n){return n.toString()}function ToInt(n){return parseInt(n)}function ToDouble(n){return parseFloat(n)}function Join(n,t){return n.join(t)}function Split(n,t){return n.split(t)}function Trim(n){return $.trim(n)}function LengthOf(n){return n==null?0:n.length}function StartsWith(n,t){return n.indexOf(t)==0}function LCase(n){return n.toLowerCase()}function UCase(n){return n.toUpperCase()}function CapFirst(n){return n.substring(0,1).toUpperCase()+n.substring(1)}function Left(n,t){return n.substring(0,t)}function Right(n,t){return n.substring(n.length-t-1)}function Mid(n,t,i){return n.substr(t-1,i)}function Instr(n,t,i){var r,u,f;return i===undefined?(r=n,u=t,r.indexOf(u)+1):(f=n,r=t,u=i,r.indexOf(u,f-1)+1)}function Replace(n,t,i){return n.split(t).join(i)}function getRegex(n,t){var i=regexCache[t];return i?i:(i=new XRegExp(n,"i"),regexCache[t]=i,i)}function IsRegexMatch(n,t,i){var r=getRegex(n,i);return r.test(t)}function GetMatchStrength(n,t,i){var o=getRegex(n,i),e=0,r=o.exec(t),u=GetRegexNamedGroups(r),f;for(f in u)r[u[f]]!=undefined&&(e+=r[u[f]].length);return t.length-e}function Populate(n,t,i){var h=getRegex(n,i),e=h.exec(t),s={},u=GetRegexNamedGroups(e),f,r,o;for(f in u)e[u[f]]!=undefined&&(r=u[f],o=r.indexOf("_map_"),o!=-1&&(r=r.substring(o+5)),s[r]=e[u[f]]);return s}function GetRegexNamedGroups(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&(StartsWith(t,"object")||t.indexOf("_map_object")!=-1||StartsWith(t,"text")||t.indexOf("_map_text")!=-1||StartsWith(t,"exit")||t.indexOf("_map_exit")!=-1)&&i.push(t);return i}function GetAttribute(n,t){return t=t.replace(/ /g,"___SPACE___"),n[t]}function GetBoolean(n,t){return HasBoolean(n,t)?GetAttribute(n,t):!1}function GetInt(n,t){return HasInt(n,t)?GetAttribute(n,t):0}function GetObject(n){return(result=objectsNameMap[n],result==undefined)?result:result.__destroyed?null:result}function GetTimer(n){return GetObject(n)}function GetString(n,t){return HasString(n,t)?GetAttribute(n,t):null}function HasAttribute(n,t){return GetAttribute(n,t)!=undefined}function HasBoolean(n,t){return TypeOf(GetAttribute(n,t))=="boolean"}function HasInt(n,t){return TypeOf(GetAttribute(n,t))=="int"}function HasObject(n,t){return TypeOf(GetAttribute(n,t))=="object"}function HasString(n,t){return TypeOf(GetAttribute(n,t))=="string"}function HasScript(n,t){return TypeOf(GetAttribute(n,t))=="script"}function HasDelegateImplementation(n,t){return TypeOf(GetAttribute(n,t))=="script"}function GetAttributeNames(n){var i=[],r;for(r in n)i.push(r);return i}function AllObjects(){return allObjects}function AllExits(){return allExits}function AllCommands(){return allCommands}function AllTurnScripts(){return allTurnScripts}function TypeOf(n){return overloadedFunctions.TypeOf(n)}function OverloadedFunctions(){addMethod(this,"TypeOf",function(n){var u=typeof n,t,i,e,o,r;if(u=="function")return"script";if(u=="object"){if(n==null)return"null";if(Object.prototype.toString.call(n)==="[object Array]"){t=!0,i=!0;for(e in n)if(r=n[e],typeof r!="string"&&(i=!1),typeof r!="object"&&(t=!1),!i&&!t)break;return i?"stringlist":t?"objectlist":"unknown"}var t=!0,i=!0,f=!0;for(o in n)if(r=n[o],typeof r!="string"&&(i=!1),TypeOf(r)!="object"&&(t=!1),typeof r!="function"&&(f=!1),!i&&!t&&!f)break;return i?"stringdictionary":t?"objectdictionary":f?"scriptdictionary":"object"}return u=="boolean"?"boolean":u=="string"?"string":u=="number"?"int":u=="undefined"?"null":void 0}),addMethod(this,"TypeOf",function(n,t){return TypeOf(GetAttribute(n,t))}),addMethod(this,"DynamicTemplate",function(n,t){return params={},params.object=t,params.exit=t,params.text=t,dynamicTemplates[n](params)}),addMethod(this,"DynamicTemplate",function(n,t,i){return params={},params.object1=t,params.object2=i,dynamicTemplates[n](params)}),addMethod(this,"Eval",function(n){return eval(n)}),addMethod(this,"Eval",function(n,t){var i,r;for(i in t)r=t[i],eval("var "+i+"=varvalue");return eval(n)})}function DictionaryContains(n,t){return n[t]!=undefined}function DictionaryItem(n,t){return n[t]}function StringDictionaryItem(n,t){return n[t]}function ScriptDictionaryItem(n,t){return n[t]}function ObjectDictionaryItem(n,t){return n[t]}function DictionaryCount(n){var t=0;for(key in n)t++;return t}function ListCombine(n,t){return n.concat(t)}function ListExclude(n,t){var i=n.slice(0),r=i.indexOf(t);return r!=-1&&i.splice(r,1),i}function ListContains(n,t){return $.inArray(t,n)!=-1}function ListCount(n){return n.length}function ListItem(n,t){return n[t]}function StringListItem(n,t){return n[t]}function ObjectListItem(n,t){return n[t]}function Template(n){return templates["t_"+n]}function RunDelegateFunction(n,t){return GetAttribute(n,t)()}function Contains(n,t){return t.parent==null||t.parent==undefined?!1:t.parent==n?!0:Contains(n,t.parent)}function ShowMenu(){throw"Synchronous ShowMenu function is not supported. Use showmenu_async function instead";}function SetMenuSelection(n){Object.prototype.toString.call(menuOptions)==="[object Array]"?(awaitingCallback=!1,menuCallback(menuOptions[n])):(awaitingCallback=!1,menuCallback(n)),finishTurnAfterSelection&&TryFinishTurn()}function GetExitByName(n,t){var r,i;for(r in allExits)if(i=allExits[r],i.parent==n&&i.alias==t)return i.name}function GetExitByLink(n,t){var r,i;for(r in allExits)if(i=allExits[r],i.parent==n&&i.to==t)return i.name}function GetFileURL(n){return n}function Ask(n){if(runningWalkthrough){msg("<i>"+n+"<\/i>");var i=currentWalkthroughSteps.splice(0,1),t=i[0];if(t.substring(0,7)=="answer:")return t.substring(7)=="yes";msg("Error running walkthrough - expected menu response")}else return confirm(n)}function GetUniqueElementName(n){return n+getUniqueId()}function TryFinishTurn(){updateLists(),TryRunOnReadyScripts(),awaitingCallback||(saveGame(),typeof FinishTurn=="function"&&FinishTurn())}function TryRunOnReadyScripts(){if(!awaitingCallback&&onReadyCallback!=null){var n=onReadyCallback;onReadyCallback=null,n()}}function GetDirectChildren(n){return n._children?n._children:[]}function GetAllChildObjects(n){var t=[],r=GetDirectChildren(n),u,i;for(u in r)i=r[u],t.push(i),t=t.concat(GetAllChildObjects(i));return t}function IsGameRunning(){return gameRunning}function IsDefined(){return!0}function GetRandomInt(n,t){return Math.floor(Math.random()*(t-n+1))+n}function SafeXML(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function GetUIOption(){return null}function DoesInherit(n,t){return ListContains(n._types,t)}function Floor(n){return Math.floor(n)}function OutputText(n){var t=NewDictionary(),n;dictionaryadd(t,"fulltext",n),n=ProcessTextSection(n,t),OutputTextRaw(n)}function OutputTextRaw(n){var t=GetCurrentTextFormat("");addText('<span style="'+t+'">'+n+"<\/span><br/>"),GetString(_obj2,"commandbarformat")!=t&&ResetCommandBarFormat(),request("Speak",n)}function ResetCommandBarFormat(){var n=GetCurrentTextFormat("")+";background:"+_obj2.defaultbackground;set(_obj2,"commandbarformat",n),setCommandBarStyle(n)}function OutputTextNoBr(n){var t=NewDictionary(),n;dictionaryadd(t,"fulltext",n),n=ProcessTextSection(n,t),OutputTextRawNoBr(n)}function OutputTextRawNoBr(n){addText('<span style="'+GetCurrentTextFormat("")+'">'+n+"<\/span>"),request("Speak",n)}function GetCurrentTextFormat(n){var t="",i,n,r;return i=UIOptionUseGameFont()?GetCurrentFontFamily():GetUIOption("OverrideFontName"),LengthOf(i)>0&&(t=t+"font-family:"+i+";"),LengthOf(n)==0&&(n=UIOptionUseGameColours()?_obj2.defaultforeground:GetUIOption("OverrideForeground")),LengthOf(n)>0&&(t=t+"color:"+n+";"),r=UIOptionUseGameFont()?_obj2.defaultfontsize:ToDouble(GetUIOption("OverrideFontSize")),r>0&&(t=t+"font-size:"+ToString(r)+"pt;"),t}function GetCurrentLinkTextFormat(){return GetCurrentTextFormat(GetLinkTextColour())}function UIOptionUseGameFont(){var n=GetUIOption("UseGameFont");return n==null||n=="true"?!0:!1}function UIOptionUseGameColours(){var n=GetUIOption("UseGameColours");return n==null||n=="true"?!0:!1}function GetLinkTextColour(){return UIOptionUseGameColours()?_obj2.defaultlinkforeground:GetUIOption("OverrideLinkForeground")}function ProcessTextSection(n,t){var h=!1,i=Instr(n,"{"),f,r,u,e,s;if(i>0)for(var u=1,e=i+1,s=!1;!s;)if(f=Instr(e,n,"{"),r=Instr(e,n,"}"),r>0){if(f>0&&f<r)u=u+1,e=f+1;else if(u=u-1,e=r+1,u==0)var o=r,h=!0,s=!0}else s=!0;if(h)var c=Mid(n,i+1,o-i-1),l=ProcessTextCommand(c,t),n=Left(n,i-1)+l+ProcessTextSection(Mid(n,o+1),t);return n}function ProcessTextCommand(n,t){var r,f,e;if(StartsWith(n,"if "))return ProcessTextCommand_If(n,t);if(StartsWith(n,"object:"))return ProcessTextCommand_Object(n,t);if(StartsWith(n,"command:"))return ProcessTextCommand_Command(Mid(n,9),t);if(StartsWith(n,"page:"))return ProcessTextCommand_Command(Mid(n,6),t);if(StartsWith(n,"exit:"))return ProcessTextCommand_Exit(n,t);if(StartsWith(n,"once:"))return ProcessTextCommand_Once(n,t);if(StartsWith(n,"notfirst:"))return ProcessTextCommand_NotFirst(n,t);if(StartsWith(n,"random:"))return ProcessTextCommand_Random(n,t);if(StartsWith(n,"rndalt:"))return ProcessTextCommand_RandomAlias(n,t);if(StartsWith(n,"img:"))return ProcessTextCommand_Img(n,t);if(StartsWith(n,"counter:"))return ProcessTextCommand_Counter(Mid(n,9),t);if(StartsWith(n,"select:"))return ProcessTextCommand_Select(n,t);if(r=Instr(n,"."),r==0)return"{"+ProcessTextSection(n,t)+"}";var o=Left(n,r-1),u=Mid(n,r+1),i=GetObject(o);if(i==null)return"{"+ProcessTextSection(n,t)+"}";if(HasAttribute(i,u)){f=overloadedFunctions.TypeOf(i,u);switch(f){case"string":case"int":case"double":return ToString(GetAttribute(i,u));case"boolean":return e=GetAttribute(i,u),e?"true":"false";default:return"("+f+")"}}else return""}function ProcessTextCommand_Object(n,t){var r=Mid(n,8),u="",e=Instr(r,":"),i,o,f,s;return e>0&&(u=Mid(r,e+1),r=Left(r,e-1)),i=GetObject(r),i==null?"{"+ProcessTextSection(n,t)+"}":(LengthOf(u)==0&&(u=SafeXML(GetDisplayAlias(i))),_obj2.enablehyperlinks?(o=ProcessTextCommand_GetNextLinkId(),f="",f=HasString(i,"linkcolour")&&GetUIOption("UseGameColours")=="true"?i.linkcolour:GetLinkTextColour(),s=GetCurrentTextFormat(f),'<a id="'+o+'" style="'+s+'" class="cmdlink elementmenu" data-elementid="'+i.name+'">'+u+"<\/a>"):u)}function ProcessTextCommand_GetNextLinkId(){return HasInt(_obj2,"lastlinkid")||set(_obj2,"lastlinkid",0),set(_obj2,"lastlinkid",_obj2.lastlinkid+1),"verblink"+_obj2.lastlinkid}function ProcessTextCommand_Command(n,t){var h=n,f=Instr(n,":"),n,u,i,s,l,r;f>0&&(h=Mid(n,f+1),n=Left(n,f-1));var a=GetCurrentLinkTextFormat(),e=NewObjectList(),o=ScopeCommands(),c=Object.prototype.toString.call(o)==="[object Array]";for(u in o)i=c?o[u]:u,(c||u!="__dummyKey")&&IsRegexMatch(i.pattern,n,i.name)&&listadd(e,i);return s="",ListCount(e)==1&&(i=ObjectListItem(e,0),s=i.name),l=ProcessTextCommand_GetNextLinkId(),r="",_obj2.deactivatecommandlinks&&(r=r+'data-deactivateonclick="true" '),r=r+'data-command="'+n+'"','<a id="'+l+'" style="'+a+'" class="cmdlink commandlink" data-elementid="'+s+'" '+r+">"+ProcessTextSection(h,t)+"<\/a>"}function ProcessTextCommand_Exit(n,t){var u=Mid(n,6),i=GetObject(u);if(i==null)return"{"+ProcessTextSection(n,t)+"}";var f=GetDisplayVerbs(i),r=GetDisplayAlias(i),e=LCase(StringListItem(f,0))+" "+r,o=GetCurrentLinkTextFormat();return'<a style="'+o+'" class="cmdlink exitlink" data-elementid="'+i.name+'" data-command="'+e+'">'+r+"<\/a>"}function ProcessTextCommand_Once(n,t){var r,i;return HasAttribute(_obj2,"textprocessor_seen")||set(_obj2,"textprocessor_seen",NewDictionary()),r=StringDictionaryItem(t,"fulltext"),DictionaryContains(_obj2.textprocessor_seen,r)?i=DictionaryItem(_obj2.textprocessor_seen,r):(i=NewList(),dictionaryadd(_obj2.textprocessor_seen,r,i)),ListContains(i,n)?"":(listadd(i,n),ProcessTextSection(Mid(n,6),t))}function ProcessTextCommand_NotFirst(n,t){var r,i;return HasAttribute(_obj2,"textprocessor_seen")||set(_obj2,"textprocessor_seen",NewDictionary()),r=StringDictionaryItem(t,"fulltext"),DictionaryContains(_obj2.textprocessor_seen,r)?i=DictionaryItem(_obj2.textprocessor_seen,r):(i=NewList(),dictionaryadd(_obj2.textprocessor_seen,r,i)),ListContains(i,n)?ProcessTextSection(Mid(n,10),t):(listadd(i,n),"")}function ProcessTextCommand_Random(n,t){var r=Mid(n,8),i=Tsplit(r),u=GetRandomInt(0,ListCount(i)-1);return ProcessTextSection(ListItem(i,u),t)}function Tsplit(n){for(var f=NewStringList(),i=0,r=1,u,t=1;t<=LengthOf(n);t++)Mid(n,t,1)=="{"&&(i=i+1),Mid(n,t,1)=="}"&&(i=i-1),Mid(n,t,1)==":"&&0>=i&&(u=Mid(n,r,t-r),listadd(f,u),r=t+1);return u=Mid(n,r),listadd(f,u),f}function ProcessTextCommand_RandomAlias(n,t){var u=Mid(n,8),i=GetObject(u),r;return i==null?"{"+ProcessTextSection(n,t)+"}":(r=ListCount(i.alt),r>0?ListItem(i.alt,GetRandomInt(0,r-1)):"")}function ProcessTextCommand_If(n,t){var s=Mid(n,4),w=Instr(s,":"),i,f,b,r,o,p,a,v,y,u;if(w==0)return"{if "+s+"}";var e=Mid(s,w+1),r=Left(s,w-1),i=Instr(r,"<=");if(i!=0&&(f=2),i==0&&(i=Instr(r,">="),i!=0&&(f=2)),i==0&&(i=Instr(r,"<>"),i!=0&&(f=2)),i==0&&(i=Instr(r,"<"),i!=0&&(f=1)),i==0&&(i=Instr(r,">"),i!=0&&(f=1)),i==0&&(i=Instr(r,"="),i!=0&&(f=1)),i==0){if(b=!0,StartsWith(r,"not ")&&(b=!1,r=Mid(r,5)),o=Instr(r,"."),o==0)p=GetBoolean(_obj2,r);else{var a=Left(r,o-1),v=Mid(r,o+1),y=GetObject(a);p=y==null?!1:GetBoolean(y,v)}return p==b?ProcessTextSection(e,t):""}var l=Left(r,i-1),h=Mid(r,i+f),c=Mid(r,i,f),o=Instr(l,".");if(o==0)if(a="",v="",HasInt(_obj2,l))a="game",v=l;else return"{if "+s+"}";else a=Left(l,o-1),v=Mid(l,o+1);return(y=GetObject(a),y==null)?"{if "+s+"}":(u=GetAttribute(y,v),overloadedFunctions.TypeOf(u)=="object"&&(u=u.name),c=="=")?ToString(u)==h?ProcessTextSection(e,t):"":c=="<>"?ToString(u)==h?"":ProcessTextSection(e,t):c==">"?ToDouble(ToString(u))>ToDouble(h)?ProcessTextSection(e,t):"":c=="<"?ToDouble(ToString(u))<ToDouble(h)?ProcessTextSection(e,t):"":c==">="?ToDouble(ToString(u))>=ToDouble(h)?ProcessTextSection(e,t):"":c=="<="?ToDouble(ToString(u))<=ToDouble(h)?ProcessTextSection(e,t):"":void 0}function ProcessTextCommand_Img(n){var i=Mid(n,5);return'<img src="'+GetFileURL(i)+'" />'}function ProcessTextCommand_Counter(n){return HasAttribute(_obj2,n)?ToString(GetAttribute(_obj2,n)):"0"}function ProcessTextCommand_Select(n,t){var o=Mid(n,8),r=Split(o,":"),e=StringListItem(r,0),i,u,f;return listremove(r,e),i=Split(e,"."),ListCount(i)==2?(u=GetObject(StringListItem(i,0)),u==null?"{"+ProcessTextSection(n,t)+"}":HasInt(u,StringListItem(i,1))?(f=GetInt(u,StringListItem(i,1)),0>f||f>=Listcount(r)?"{"+ProcessTextSection(n,t)+"}":ProcessTextSection(ListItem(r,f),t)):"{"+ProcessTextSection(n,t)+"}"):"{"+ProcessTextSection(n,t)+"}"}function SetFramePicture(n){request("SetPanelContents",'<img src="'+GetFileURL(n)+'" onload="setPanelHeight()"/>'),set(_obj2,"panelcontents",n)}function ClearFramePicture(){request("SetPanelContents",""),set(_obj2,"panelcontents",null)}function ClearScreen(){request("ClearScreen","")}function SetForegroundColour(n){request("Foreground",n),set(_obj2,"defaultforeground",n)}function SetBackgroundColour(n){request("Background",n),set(_obj2,"defaultbackground",n)}function SetFontName(n){set(_obj2,"defaultfont",n),set(_obj2,"defaultwebfont","")}function SetWebFontName(n){AddExternalStylesheet("https://fonts.googleapis.com/css?family="+Replace(n," ","+")),set(_obj2,"defaultwebfont",n)}function AddExternalStylesheet(n){_obj2.externalstylesheets==null&&set(_obj2,"externalstylesheets",NewStringList()),ListContains(_obj2.externalstylesheets,n)||(listadd(_obj2.externalstylesheets,n),addExternalStylesheet(n))}function SetFontSize(n){set(_obj2,"defaultfontsize",n)}function PrintCentered(n){SetAlignment("center"),OutputText(n),SetAlignment("left")}function ShowYouTube(n){AddYouTube(n)}function ShowVimeo(n){AddVimeo(n)}function WaitForKeyPress(){request("Wait","")}function DisplayHttpLink(n,t,i){var r=Instr(t,"://"),t;r>0&&(t=Mid(t,r+3)),t=i?"https://"+t:"http://"+t,OutputText('<a style="'+GetCurrentLinkTextFormat()+'" href="'+t+'">'+n+"<\/a>")}function DisplayMailtoLink(n,t){if(Instr(t,"mailto:")==0)var t="mailto:"+t;OutputText('<a style="'+GetCurrentLinkTextFormat()+'" href="'+t+'">'+n+"<\/a>")}function CommandLink(n,t){return"{command:"+n+":"+t+"}"}function Log(n){request("Log",n)}function SetBackgroundImage(n){SetBackgroundImage(GetFileURL(n)),set(_obj2,"backgroundimage",n)}function SetBackgroundOpacity(n){SetBackgroundOpacity(n),set(_obj2,"backgroundopacity",n),set(_obj2,"setbackgroundopacity",!0)}function DisplayList(n,t){var u,r,f,i;i=t?"<ol>":"<ul>",u=Object.prototype.toString.call(n)==="[object Array]";for(r in n)f=u?n[r]:r,(u||r!="__dummyKey")&&(i=i+"<li>"+f+"<\/li>");i=t?i+"<\/ol>":i+"<\/ul>",OutputText(i)}function SetAlignment(n){createNewDiv(n)}function GetCurrentFontFamily(){return _obj2.defaultwebfont==null?_obj2.defaultfont:_obj2.defaultwebfont==""?_obj2.defaultfont:"'"+_obj2.defaultwebfont+"', "+_obj2.defaultfont}function TextFX_Typewriter(n,t){TextFX_Typewriter_Internal(n,t,GetCurrentFontFamily(),_obj2.defaultforeground,_obj2.defaultfontsize)}function TextFX_Typewriter_Internal(n,t,i,r,u){TextFX.Typewriter(n,t,i,r,u)}function TextFX_Unscramble(n,t,i){TextFX_Unscramble_Internal(n,t,i,GetCurrentFontFamily(),_obj2.defaultforeground,_obj2.defaultfontsize)}function TextFX_Unscramble_Internal(n,t,i,r,u,f){TextFX.Unscramble(n,t,i,r,u,f)}function InitInterface(){_obj2.setcustomwidth&&setGameWidth(_obj2.customwidth),_obj2.showborder||hideBorder(),_obj2.setcustompadding&&setGamePadding(_obj2.custompaddingtop,_obj2.custompaddingbottom,_obj2.custompaddingleft,_obj2.custompaddingright),request("Background",_obj2.defaultbackground),request("Foreground",_obj2.defaultforeground),request("LinkForeground",_obj2.defaultlinkforeground),SetMenuBackground(_obj2.menubackground),SetMenuForeground(_obj2.menuforeground),SetMenuHoverBackground(_obj2.menuhoverbackground),SetMenuHoverForeground(_obj2.menuhoverforeground),SetMenuFontName(_obj2.menufont),SetMenuFontSize(_obj2.menufontsize+"pt"),request("Hide","Panes"),request("Hide","Command"),request("Hide","Location")}function StartGame(){_obj2.showtitle&&(PrintCentered('<span style="font-size:260%">'+_obj2.gamename+"<\/span>"),_obj2.subtitle!=null&&LengthOf(_obj2.subtitle)>0&&PrintCentered('<span style="font-size:130%">'+_obj2.subtitle+"<\/span>"),_obj2.author!=null&&LengthOf(_obj2.author)>0&&PrintCentered('<br/><span style="font-size:140%">'+_obj2.author+"<\/span>"),OutputText('<div style="margin-top:20px"><\/div>')),set(_obj2,"noclear",!0),DoPage(_obj4.parent),set(_obj2,"noclear",!1)}function ScopeInventory(){return NewObjectList()}function GetPlacesObjectsList(){return NewObjectList()}function ScopeExits(){return NewObjectList()}function ScopeCommands(){var r=NewObjectList(),t=AllCommands(),u=Object.prototype.toString.call(t)==="[object Array]",n,i;for(n in t)i=u?t[n]:n,(u||n!="__dummyKey")&&i.parent==_obj2.pov.parent&&listadd(r,i);return r}function HandleCommand(n){var t,i;n=="undo"||(t=GetObject(n),t==null?OutputText("Error - no page named '"+n+"'"):(!_obj2.clearlastpage&&HasAttribute(_obj4.parent,"options")&&(DictionaryContains(_obj4.parent.options,n)&&(i=StringDictionaryItem(_obj4.parent.options,n),OutputText("<b>"+i+"<\/b>"),OutputText("")),disableAllCommandLinks()),set(_obj4,"parent",GetObject(n))))}function DoPage(){var t=_obj4.parent;_obj2.clearlastpage?_obj2.noclear||request("ClearScreen",""):HasString(_obj2,"optionsoutputsection")&&HideOutputSection(_obj2.optionsoutputsection),GetBoolean(_obj2,"continuesound")||stopsound(),HasScript(_obj2,"roomenter")&&runscriptattribute2(_obj2,"roomenter"),on_ready(function(){var u,i,n,r;if((GetBoolean(_obj4.parent,"runscript")||GetBoolean(_obj4.parent,"runscriptonly"))&&(HasScript(_obj4.parent,"script")?runscriptattribute2(_obj4.parent,"script"):OutputText("No script has been created for this page.")),t==_obj4.parent&&!GetBoolean(_obj4.parent,"runscriptonly")){if(HasString(_obj4.parent,"sound")&&LengthOf(_obj4.parent.sound)>0&&(playsound(_obj4.parent.sound,!1,!1),set(_obj2,"continuesound",GetBoolean(_obj4.parent,"continuesound"))),HasString(_obj4.parent,"picture")&&LengthOf(_obj4.parent.picture)>0&&(picture(_obj4.parent.picture),OutputText("")),HasString(_obj4.parent,"youtube")&&LengthOf(_obj4.parent.youtube)>0&&(AddYouTube(_obj4.parent.youtube),OutputText(""),OutputText("")),OutputText(_obj4.parent.description),OutputText(""),OutputText(""),set(_obj2,"optionsoutputsection",StartNewOutputSection()),overloadedFunctions.TypeOf(_obj4.parent,"options")=="stringdictionary"){u=Object.prototype.toString.call(_obj4.parent.options)==="[object Array]";for(i in _obj4.parent.options)n=u?_obj4.parent.options[i]:i,(u||i!="__dummyKey")&&(r=GetObject(n),r==null?OutputText(StringDictionaryItem(_obj4.parent.options,n)+" (broken link)"):DoesInherit(r,"link")?OutputText('<a href="'+r.address+'">'+StringDictionaryItem(_obj4.parent.options,n)+"<\/a>"):OutputText(CommandLink(n,StringDictionaryItem(_obj4.parent.options,n))),OutputText(""))}EndOutputSection(_obj2.optionsoutputsection)}}),set(_obj4.parent,"visited",!0)}function StartNewOutputSection(){HasInt(_obj2,"lastoutputsection")||set(_obj2,"lastoutputsection",0),set(_obj2,"lastoutputsection",_obj2.lastoutputsection+1);var n="section"+_obj2.lastoutputsection;return JsStartOutputSection(n),n}function EndOutputSection(n){JsEndOutputSection(n)}function HideOutputSection(n){JsHideOutputSection(n)}function RandomChance(n){return GetRandomInt(1,100)<=n}function HasSeenPage(n){return GetBoolean(n,"visited")}function SetFlagOn(n){set(_obj2,n,!0)}function SetFlagOff(n){set(_obj2,n,!1)}function SetCounter(n,t){set(_obj2,n,t)}function ChangeCounter(n,t){HasInt(_obj2,n)||set(_obj2,n,0),set(_obj2,n,GetInt(_obj2,n)+t)}function IncreaseCounter(n){HasInt(_obj2,n)||set(_obj2,n,0),set(_obj2,n,GetInt(_obj2,n)+1)}function DecreaseCounter(n){HasInt(_obj2,n)||set(_obj2,n,0),set(_obj2,n,GetInt(_obj2,n)-1)}function GetInput(n){request("Show","Command"),getinput_async(function(t){request("Hide","Command");var i=NewStringDictionary();dictionaryadd(i,"result",t),invoke(n,i)})}function AddPageLink(n,t,i){RemovePageLink(n,t),dictionaryadd(n.options,t.name,i)}function RemovePageLink(n,t){n.options==null&&set(n,"options",NewStringDictionary()),DictionaryContains(n.options,t.name)&&dictionaryremove(n.options,t.name)}function MovePlayer(n){set(_obj4,"parent",n)}var selectSizeWithoutStatus=8,selectSizeWithStatus=6,numCommands=0,thisCommand=0,commandsList=[],tmrTick=null,tickCount=0,sendNextGameTickerAfter=0,verbButtonCount=9,commandLog=null,beginningOfCurrentTurnScrollPosition=0,scrollTimeout=null,_waitMode=!1,_pauseMode=!1,_waitingForSoundToFinish=!1,waitButtonId=0,_menuSelection="",_compassDirs=["northwest","north","northeast","west","east","southwest","south","southeast","up","down","in","out"],lastPaneLinkId=0,localStorageTransactionId,lastRead,currentWalkthroughSteps,runningWalkthrough=!1,stepCount,walkthroughMaxSteps,walkthroughFinishCode,walkthroughUndoTest=!1,walkthroughUndoStage,walkthroughUndoSteps=0,postStep=null,_currentDiv=null,_divCount=0,_outputSections=[],webPlayer=!0,tmrTick=null,awaitingCallback=!1,gameRunning=!0,gameActive=!0,nextObjectId=0,transactions=[],currentTransaction,thisTurnModifiedItems=[],objectTag=new XRegExp("<object (id='(.*?)' )?verbs='(?<verbs>.*?)'>(?<text>.*?)<\/object>"),colorTag=/\<color color="(.*?)"\>(.*?)\<\/color\>/,commandTag=/\<command input="(.*?)"\>(.*?)\<\/command\>/,alignTag=/\<align align="(.*?)"\>(.*?)\<\/align\>/,fontTag=/\<font size="(.*?)"\>(.*?)\<\/font\>/,currentFont="",currentFontSize="",currentForeground="",currentLinkForeground="",nextID=1,allOutput="",menuOptions,menuCallback,finishTurnAfterSelection,waitCallback,getinputCallback,awaitingInputCallback=!1,createdObjects=[],addedTypes=[],destroyedObjects=[],onReadyCallback=null,regexCache={},overloadedFunctions=new OverloadedFunctions,templates={},dynamicTemplates={},allObjects=[],allExits=[],allCommands=[],allTurnScripts=[],allTimers=[],objectReferences=[],objectListReferences=[],objectDictionaryReferences=[],embeddedHtml={},objectsNameMap={},elementsNameMap={};templates.t_NothingToUndo="Nothing to undo!",_obj2={elementtype:"object",name:"game",type:"game",gamename:"Ksatria Fajar (Real)",gameid:"bb7253df-c854-41a2-840b-b88b3ae4c5b3",version:"1.0",firstpublished:"2017",author:"Feby  Ardiansyah",category:"Fantasy",cover:"Fajri (Face).jpg",defaultbackground:"Black",showborder:!0,defaultforeground:"White",defaultlinkforeground:"Orange",_js_name:"_obj2",_types:["defaultgame"],_editorstyle:"gamebook",defaultfont:"Georgia, serif",defaultfontsize:12,menufont:"Arial",menufontsize:9,menubackground:"White",menuforeground:"Black",menuhoverbackground:"LightGrey",menuhoverforeground:"Black",description:"",setcustomwidth:!0,customwidth:700,setcustompadding:!1,custompaddingtop:30,custompaddingbottom:0,custompaddingleft:20,custompaddingright:20,showtitle:!0,noclear:!1,clearlastpage:!1,deactivatecommandlinks:!1},elementsNameMap.game=_obj2,objectsNameMap.game=_obj2,_obj3={elementtype:"object",name:"Page1",type:"object",description:'<b>Chapter 1<\/b><br/><br/>{img:Ch 1 Burning Castle.jpg}<br/><br/>"AAAAAAHHHH!!!" Jeritnya, bersama darah yang terciprat dari sekujur tubuh. <br/> <br/>Kepalanya lepas dan terbang ke langit, menghujani wajahku dengan merah darah. Bagai boneka yang putus talinya, Ia pun jatuh bersama ribuan mayat yang bergelimpangan di lantai. Memenuhi penciumanku dengan amisnya darah dan busuknya kenyataan. <br/><br/>Aku menoleh dan mendapati pemandangan yang sama dari ratusan ksatria di sekitarku. Tubuhnya terkoyak. Tangan-kakinya putus. Organnya berceceran. Dan wajahnya tercabik tak karuan. Menghias istana yang semula putih bersih menjadi merah semerah darah.<br/><br/>Semua ini membuatku...',options:{Page02:"Takut",Page03:"Gila"},_js_name:"_obj3",_types:["defaultobject"]},elementsNameMap.Page1=_obj3,allObjects.push(_obj3),objectsNameMap.Page1=_obj3,_obj4={elementtype:"object",name:"player",parent:_obj3,type:"object",_js_name:"_obj4",_types:["defaultplayer","defaultobject"],changedparent:function(){DoPage(_obj4.parent)},description:""},elementsNameMap.player=_obj4,allObjects.push(_obj4),objectsNameMap.player=_obj4,_obj5={elementtype:"object",name:"Page2",type:"object",description:'Ia menangis seraya memandang boneka beruang di tangan kanannya. Hadiah yang baru didapat dari sang ayah, di hari ulang tahunnya yang ke-15, yang seharusnya jadi hari terindah dalam hidupnya.<br/><br/>Rambut emasnya terurai tak karuan. Gaun putih yang dikenakannya pun menghitam. Bermandikan darah ribuan ksatria yang mencoba melindunginya. Lebih gelap dari malam dan lebih kelam dari karam.<br/><br/>Dan sekarang, mereka datang untuk membunuh gadis ini. Tidak! Tidak akan kubiarkan!!!<br/><br/>"AAAAAAH!!!" Jeritku, terpental ke dinding.<br/><br/>"Fajri!" Ujar gadis itu.<br/><br/>Merah darah memenuhi mataku. Baik dari sayatan di dahiku, maupun bercak darah yang memenuhi seluruh kota. Yang banjir mengairi sungai-sungai di seluruh kerajaan. <br/><br/>Api menyala, melesat menembus langit. Membakar semua yang di laluinya. Baik mayat di depanku maupun ornamen yang hiasi seisi istana. <br/><br/>Jutaan undead terus membanjiri istana. Tanpa peringatan, makhluk tak bernyawa ini menyerang kerajaan kami. Menghancurkan semua yang dilaluinya. <br/><br/>Gadis itu mendekat dan mendekapku di pelukan hangatnya. <br/><br/>"Tuan putri....Lari...!" Lirihku.<br/><br/>"Tapi...Tapi!"<br/><br/>"Aysa!!!"<br/><br/>Aysa tersentak. Mata hijaunya berlinang, tubuhnya gemetar dan batinnya terguncang, tak kuasa menahan emosi yang meledak di hatinya. Hingga akhirnya air mata pun jatuh basahi pipiku. <br/><br/>Baru kali ini aku melihat Aysa menangis. Tidak kusangka putri yang selalu tegar dan ceria ini bisa menitikkan air mata. Melihat orang tuanya dibunuh pasti mengguncang hatinya.<br/><br/>"Aysa..."<br/><br/>Tiba-tiba 2 pria berjubah hitam datang menghampiri kami. Mereka melihat Aysa dan tersenyum ganas.<br/><br/>"Ke~te~mu" Ucap yang lebih tinggi di antara keduanya. "Aysa. Semua ini salahmu. Semua terjadi karenamu." <br/><br/>"Ngga..." Aysa menggeleng menutup telinga. "Aysa ngga akan nakal lagi...Aysa janji...Aysa janji..."<br/><br/>"Dan kau tau dosa terbesarmu?" Tanyanya. "Yaitu lahir ke dunia ini!!!"<br/><br/>Ia menembakkan api dari pedangnya, mencoba membunuh Aysa!',options:{Page4:"Lindungi Aysa!",Page5:"Serang Dia!"},_js_name:"_obj5",_types:["defaultobject"]},elementsNameMap.Page2=_obj5,allObjects.push(_obj5),objectsNameMap.Page2=_obj5,_obj6={elementtype:"object",name:"Img Aysa",parent:_obj5,type:"object",picture:"Aysa x (6) (pink rose).jpg",description:"",options:{Page2:"..."},_js_name:"_obj6",_types:["picture","defaultobject"]},elementsNameMap["Img Aysa"]=_obj6,allObjects.push(_obj6),objectsNameMap["Img Aysa"]=_obj6,_obj7={elementtype:"object",name:"Page02",parent:_obj5,type:"object",description:"Tidak...Aku tidak ingin melihatnya! Aku tidak ingin melihatnya!!! Tapi betapa keraspun aku menutup mata. Aku masih bisa melihatnya. Layaknya cd yang rusak. aku terus melihatnya. Lagi...Lagi...Lagi...dan Lagi. Bersama jeritan yang terus terngiang. Jeritan tragis penuh tangis. Yang terus mencabik habis hatiku.<br/><br/>Siapapun...Kumohon! Hentikan semua ini! Hentikan semua kegilaan ini!!! Aku menjerit dan terus menjerit. Tapi naas. Tiada seorang pun yang mampu menjawab. Semua telah mati. Semua kecuali gadis kecil di sisiku.<br/>",options:{"Img Aysa":"..."},_js_name:"_obj7",_types:["defaultobject"]},elementsNameMap.Page02=_obj7,allObjects.push(_obj7),objectsNameMap.Page02=_obj7,_obj8={elementtype:"object",name:"Page03",parent:_obj5,type:"object",options:{"Img Aysa":"..."},description:"Tidak...Aku tidak ingin melihatnya! Aku tidak ingin melihatnya!!! Tapi betapa keraspun aku menutup mata. Aku masih bisa melihatnya. Layaknya cd yang rusak. aku terus melihatnya. Lagi...Lagi...Lagi...dan Lagi. Bersama jeritan yang terus terngiang. Jeritan tragis penuh tangis. Yang terus mencabik habis hatiku.<br/><br/>Siapapun...Kumohon! Hentikan semua ini! Hentikan semua kegilaan ini!!! Aku menjerit dan terus menjerit. Tapi naas. Tiada seorang pun yang mampu menjawab. Semua telah mati. Semua kecuali gadis kecil di sisiku.<br/>",_js_name:"_obj8",_types:["defaultobject"]},elementsNameMap.Page03=_obj8,allObjects.push(_obj8),objectsNameMap.Page03=_obj8,_obj9={elementtype:"object",name:"Page4",type:"object",description:'"Aysa!!!" Aku lari dan melindunginya. Tapi naas. Perisai terkuat sekalipun tak mampu menahan api ini. Bahkan ia langsung meleleh "AAAAH!" bersama tangan kiriku yang gosong menghitam.<br/><br/>"AHAHAHA" Tawanya. "Lu Tolol apa bego sih?! AHAHA!"<br/><br/>"Troy, fokus. Semua sia-sia jika gadis itu hidup." Balas pria disebelahnya. <br/><br/>"Berisik! Gua juga tau, Noct!"<br/><br/>   Ia pun berhenti dan mengarahkan pedangnya pada kami. <br/><br/>"Fajri..." Lirih Aysa.<br/><br/>"Jangan takut" Kataku. Kukerahkan seluruh tenaga yang tersisa untuk berdiri di depan tubuh mungil Aysa. "Aku akan melindungimu! Meski nyawa taruhannya!"<br/><br/>"AHAHAHA Gua suka gaya lu" Tawa Troy. "Kalo gitu. Mati lu!!!"<br/><br/>   Pedang merah Troy pun kembali menyala. Menerangi wajah tampan Noct dan Troy yang tertutup jubah. <br/><br/>"Kalian! Jangan-jangan?!" Ujarku. <br/><br/>   Tidak salah lagi, aku mengenal keduanya. Troy dan Noct. Bagaimana mungkin aku bisa lupa wajah mereka.<br/><br/>"Apa yang terjadi??? Kenapa kalian menyerang kami???!!!" <br/><br/>   Mendengar aumanku, keduanya tersenyum. Lebih dingin dari es dan lebih tajam dari pedang. Senyum dingin yang menusuk hati. <br/><br/>"Selamat tinggal, Fajri." Gumam Troy.<br/><br/>   Apa ... ini akhirnya? Apa aku harus kehilangan orang yang kucintai? Lagi? ',options:{Page6:"Jangan menyerah!"},_js_name:"_obj9",_types:["defaultobject"]},elementsNameMap.Page4=_obj9,allObjects.push(_obj9),objectsNameMap.Page4=_obj9,_obj10={elementtype:"object",name:"Page5",type:"object",description:"Aku melesat dan menebasnya, tapi ia menghindar dan balik menyerang. Membakarku dan membunuhku dalam sekejap.",options:{"Game Over":"Restart"},_js_name:"_obj10",_types:["defaultobject"]},elementsNameMap.Page5=_obj10,allObjects.push(_obj10),objectsNameMap.Page5=_obj10,_obj11={elementtype:"object",name:"Page6",type:"object",description:'Tidak! Masih ada harapan! Tidak akan kubiarkan Aysa mati di sini! Tidak akan!!!<br/><br/>Tiba-tiba, sebuah pisau melesat menjatuhkan pedang Troy ke tanah. <br/><br/>"Tch. Brengsek!" Ujar Troy. "Siapa yang berani ganggu gua? HAH?!"<br/><br/>Seakan menjawab auman Troy. Sepasang kuda pun melesat menghempaskan tubuh Noct dan Troy ke dinding.<br/><br/>"AARGH!!!"<br/><br/>Kuda itu berlari, menghempaskan seluruh undead yang dilaluinya. Dan berhenti di depan kami. <br/><br/>"Tuan putri! Fajri!" Ujar pria berambut pirang dengan zirahnya.<br/><br/>{img:Grey.jpg}<br/><br/>"Grey! Hans!" Ujarku. "Kenapa kalian-"<br/><br/>"Tidak ada waktu," Potong Hans, pria paruh baya di sisinya. <br/><br/>{img:Hans (edgar02).jpg}<br/><br/>"Naiklah!"<br/><br/>"Ya!" Jawabku dan Aysa, serentak.<br/><br/>Kami pun naik dan pergi. Ribuan undead berusaha menghadang, tapi Grey dan ksatria kekar disampingnya kembali menghempaskan mereka ke dinding istana.<br/><br/>"Tch. Percuma! Noct!!" Ujar Troy.<br/><br/>Cincin di jari telunjuk Noct pun bersinar memancarkan cahaya kehijauan yang melesat menembus langit. <br/><br/>"Apa ... itu?" Tanya Aysa.<br/><br/>Firasatku buruk. Keringat dingin mengalir deras di tubuhku. Apa ini? Kenapa cahaya hijau itu mengingatkanku kepada adikku? Tidak. Bukan saatnya untuk berpikir. Kita harus menjauh dari sini. Dan cepat!<br/><br/>"Grey!" Ujarku kepada ksatria di depanku.<br/><br/>"HA!" Ia mengerti dan memacu kudanya.<br/><br/>Saat kupikir semua sudah aman. Tiba-tiba cahaya itu meledak dan menyelimuti bumi. Menelan waktu bersamanya. Yang seakan berhenti dan lenyap dari dunia. Dan di kejauhan, aku mendengar suara dingin Noct. Jelas sekali. Seakan-akan, dia ada tepat di sisiku. <br/><br/>"O Mighty God of Death, Curse thy enemy, for she has forsaken your will."<br/><br/>Sekejap cahaya hijau itu pun berkumpul ... dan melesat menyerang Aysa!<br/><br/>"AAAAAH!!!"<br/><br/>"Aysa!""Tuan Putri!" Ujarku dan Grey.<br/><br/>Hampir-hampir tubuh Aysa jatuh dari kudanya. Sebelum Hans menangkap dan melindunginya.<br/><br/>"Aysa! Sadar! Aysa!!" Ujarku.<br/><br/>"Dia hanya pingsan, tenanglah." Kata Hans.<br/><br/>"Bagaimana mungkin aku bisa tenang, Hans!"<br/><br/>"Aku bersumpah" Kata Hans. "Beliau aman."<br/><br/>Aku terdiam. Sadar bahwa tidak ada yang bisa kulakukan untuknya.<br/><br/>Tapi kenapa...? Kenapa harus Aysa?! Tidak bisa dimaafkan! Tidak akan kumaafkan!!!<br/><br/>Aku menggigit bibir dan memenuhi lidahku dengan pahitnya darah. <br/><br/>Aysa, bertahanlah. Aku pasti mengungkap :<br/><br/>- Rahasia dibalik penyerangan ini -',options:{Page7:"Chapter 2"},_js_name:"_obj11",_types:["defaultobject"]},elementsNameMap.Page6=_obj11,allObjects.push(_obj11),objectsNameMap.Page6=_obj11,_obj12={elementtype:"object",name:"Page7",type:"object",options:{Page8:"*********"},description:'************<br/><br/>   Itu adalah hari tergelap dalam hidupku. Hari dimana semuanya menghitam. Udara terlihat hitam. Matahari terlihat hitam. Aku berbaring di tempat tidur dan menatap dinding hitam rumah Hans. Aku menoleh dan mendapati Aysa, terus menangis dalam tidurnya. <br/><br/>   Sudah 2 hari sejak semua itu terjadi. Tapi Aysa tak kunjung bangun. Aku melihat keluar jendela. Dan mendapati dunia masih di sana. Aku terkejut dunia belum hancur. Padahal, bagiku dan Aysa dunia telah hancur sehancur-hancurnya.<br/><br/>"Fajri!" Ujar Grey, masuk membawakan teh. "Luka lu?" <br/><br/>   Hans berdiri di sampingnya, khawatir melihat tangan kiriku yang penuh perban.<br/><br/>"Baikan." Balasku.<br/><br/>"Syukurlah." Kata Grey.<br/><br/>   Angin berhembus menghapus air mata di wajah Aysa. Heran. Ia tetap cantik bahkan saat tidur.<br/><br/>   Aku baru sadar gaunnya telah diganti. Pasti oleh pembantu Hans yang masih gadis. Gaun pink cerah yang begitu serasi dengan rambut pirangnya yang keemasan. <br/><br/>"Jadi...Fajri," Kata Grey "Bisa cerita?"<br/><br/>   Aku hanya diam. Membuang wajahku darinya.<br/><br/>"Fajri!" Ujar Grey, menggebrak meja. "Cuma lu yang liat langsung semua ini! Kenapa Luxidia hancur? Siapa mereka? Kenapa nyerang kita?!" <br/><br/>   Aku menghela nafas dan meliriknya, tajam.<br/><br/>"Aku tidak tau." <br/><br/>"Ngga tau?! Ngga tau???!!!" Ujarnya, menarik kerahku. "Keluarga gue, bawahan gue, dan anggota kerajaan...semua mati! Dan lu?! Lu!!!" Ia berhenti. Mata birunya berkaca-kaca memandang Aysa yang tak kunjung bangun. Ia kembali menatapku. "Fajri...Lu pasti tau sesuatu kan?...Plis...Lu satu-satunya harapan kita..." Lirihnya, penuh pilu dan derita karena kehilangan orang-orang tercinta.<br/><br/>   Mentari pagi masuk dan menyinari rumah kecil ini. Menghangatkan teh yang telah dingin.<br/><br/>"Yang aku tau," Kataku, mulai bicara. "Mereka dari Yad."<br/>"Yad? Kaum lemah di Utara?!" Tanya Grey.<br/>"Fajri, kau yakin?" Sambung Hans. <br/>Aku mengangguk "Di wajah mereka ada lambang kerajaan, persis seperti Yad." Kataku, menggambar pedang dan ular dengan jari telunjuk.<br/><br/>   Keduanya begitu terkejut mendengar pernyataanku. Terutama Grey. benci, amarah dan murka terlihat jelas di wajahnya.<br/><br/>"Berani-beraninya mereka ngelakuin ini!" Katanya. "Gak bisa dimaafin!!! Gak akan gue maafin!!!" Ia mengambil senjatanya dan bergegas ke pintu. <br/><br/>"Jangan bodoh!" Ujarku. "100.000 ksatria saja tidak mampu mengalahkan mereka. Bagaimana mungkin kau-"<br/><br/>"TERUS GUE HARUS APA???!!!" Aumnya, menatapku.<br/><br/>   Belum pernah aku melihatnya seperti ini. Mata yang penuh kebencian dan haus akan darah. <br/><br/>   Ah. Aku tau mata itu. <br/><br/>"Grey." Kumohon. Dengarkan aku. Aku tidak ingin kau berakhir sepertinya dan menyesali perbuatanmu. "Kebencian tidak akan menyelesaikan apapun. Ia hanya akan membuatmu menderita."<br/><br/>"HAAAH???!!!" Ujar Grey, memukulku. Ia pun menarik kerahku, keras, hingga terdengar suara robek dari kainku. "Lu gak kesel apa?! Liat temen lu, cinta lu, keluarga lu mati di hadapan lu??!!" Katanya. "Bener juga....Sampai kapan juga lu gak akan ngerti apa yang gue rasa! Lu gak akan ngerti rasanya kehilangan keluarga! Karena lu.... Lu..." ia melemparku ke dinding. "LU GAK PUNYA KELUARGA!!!!!" dan lari meninggalkan kami.<br/><br/>"Grey!" Ujar Hans, mengejarnya. Tapi sesampainya di pintu, ia berbalik dan memandangku. "Fajri, maaf. Dia tidak bermaksud-"<br/><br/>"Sudahlah Hans." Kataku. "Aku tidak peduli."<br/><br/>   Ia mencoba mengatakan sesuatu, tapi berhenti dan lari mengejar Grey. <br/><br/>   Keluarga? Teman? Apa orang yang membuangku dan adikku bisa disebut keluarga?! Apa ksatria yang selalu melecehkanku bisa dianggap teman?! Aku tidak peduli! Aku tidak peduli!!!<br/><br/>"Bagiku, mereka hanya sampah." Gumamku, menutup mata.',_js_name:"_obj12",_types:["defaultobject"]},elementsNameMap.Page7=_obj12,allObjects.push(_obj12),objectsNameMap.Page7=_obj12,_obj13={elementtype:"object",name:"Page8",type:"object",options:{Page9:"Cari Aysa!"},description:'   Gelap. Sekeras apapun aku melawan, kegelapan terus dan terus menyelimutiku. Menghisap jiwa dan sisa kewarasan yang kumiliki. Menggantinya dengan penderitaan dan keputus-asaan tiada akhir. Lebih dalam dari laut. Dan lebih gelap dari malam. Jurang derita tak berujung. Dan lubang hitam tiada akhir.<br/><br/>   Aku terus dan terus tenggelam. Semakin lama semakin gelap. Dan semakin gelap, semakin aku gila karenanya. Sesampainya di dasar, bukan harapan yang kutemukan. Tapi pembantaian yang telah terjadi. Yang selamanya akan kuingat. Sebagai kutukan seumur hidup.<br/><br/>   Aku melihat Aysa. Menangis di atas tumpukan mayat. Di tangannya bukan boneka beruang yang kukenal. Tapi sebuah pisau berlumur darah. Yang menetes membanjiri sungai dan samudra. Menghiasnya dengan warna merah penuh luka, penuh duka, penuh derita, yang mengalir menembus laut 7 samudra. <br/><br/>   Ia tertawa, mengarahkan pisau itu ke leherku, dan-<br/><br/>"AYSA!!!" Jeritku.<br/><br/>   Aku melihat sekitar dan mendapati sinar bulan tersenyum lembut. Menerangi rumah Hans dengan kehangatannya.<br/><br/>   Keringat dingin mengalir. Dari dahi, ke leher dan membanjiri tubuhku. Membuatnya melekat tak nyaman dengan kaus hitamku.<br/><br/>   Tadi itu apa? Mimpi...? Tidak! Rasa sakit di leherku ini nyata. Tapi, Aysa tidak mungkin melakukan itu...kan? <br/><br/>   Aku menoleh. Dan terkejut karena tidak menemukan Aysa di ranjangnya.<br/><br/>"Aysa!" Ujarku, bangkit.<br/><br/>   Kemana? Kemana dia pergi? ',_js_name:"_obj13",_types:["defaultobject"]},elementsNameMap.Page8=_obj13,allObjects.push(_obj13),objectsNameMap.Page8=_obj13,_obj14={elementtype:"object",name:"Page9",type:"object",description:'Aku pun pergi mencarinya. <br/><br/>   Aku terus dan terus mencari. Berlari kesana kemari demi gadis ini. Syukurlah malam ini begitu cerah. Seakan-akan bulan keluar hanya untuk membantuku mencarinya. Tapi...dimana dia?<br/><br/>   Berpikir...ini Aysa. Jika aku jadi dia, kemana aku akan lari? <br/><br/>   Aku pun melihat ke atas. Dan mendapati langit tersenyum menyambutku. <br/><br/>{img:Ch2 Starry Night (1).jpg}<br/><br/>   Gemerlap bintang yang terhampar luas dan cahaya bulan yang bersinar terang. Berpadu memenuhi langit dan bumi dengan sejuta keindahan. Keindahan tiada tara bagai permadani taman surga.<br/><br/>   Benar juga. Aysa senang sekali mengagumi langit. Jadi dia pasti ada di...<br/><br/>"Bukit!"<br/><br/>   Aku pun lari menuju bukit. Dan mendapati Aysa, duduk sendiri menatap langit. Matanya kosong dan berkaca-kaca.<br/><br/>   Angin berhembus, menerbangkan rambut emasnya yang seakan menari-nari di udara. Ia memeluk lututnya, menahan dinginnya malam dan dinginnya kenyataan. Kenyataan bahwa ia telah kehilangan segalanya. Harta. Tahta. Dan yang terburuk, kehilangan keluarganya.<br/><br/>  Menyadari kedatanganku. Aysa menatapku, kosong.<br/><br/>"Fajri." Ucapnya, senyum.<br/><br/>   Wajahnya tersenyum namun hatinya menangis...senyum hampa penuh dusta. Lebih hampa dari angkasa dan lebih dusta dari setan.<br/><br/>   Aku pun mendekat dan duduk di sampingnya.<br/><br/>"Semua itu...bohong kan? Lucille masih ada. Dan besok ayah-ibu akan tersenyum mengerjaiku. Seperti biasa. Karena mereka belum...mereka belum..." Aysa terisak. Tak sanggup melanjutkan.<br/><br/>   Aku tak menjawab. Aku tak perlu menjawab. Kita sama-sama tau luka itu nyata. Kita sama-sama tau semua itu nyata.<br/><br/>   Angin berhembus menghapus air mata di wajah Aysa. Tapi naas, betapa keraspun angin berhembus, betapa keraspun dunia menghiburnya. Air mata tetap jatuh, membasahi rumput hijau yang didudukinya.<br/><br/>"Fajri..." isaknya. "Apa salah Aysa...? Kenapa Aysa harus ngalemin ini...? Aysa ngga mau...Aysa ngga mau semua ini...."<br/><br/>   Melihatnya seperti ini melukai hatiku. Menusuknya. Menyayatnya. Mengirisnya kecil-kecil. Dan meremukkannya tak berbekas. Aku tidak sanggup. Aku tidak sanggup melihatnya!<br/><br/>"Aysa ngga salah! Yang salah itu mereka!" Ujarku. "Semua belum berakhir!-"<br/><br/>"Semua udah berakhir!!!" Jeritnya. <br/><br/>"Aysa!!!" Ujarku, memegang pundaknya. "Kau masih hidup! Selama kau hidup, itu bukanlah tragedi"<br/><br/>"Fajri tau apa???!!!" Jeritnya, menepis tanganku. "Aysa ngga bisa hidup tanpa mereka! Aysa ngga mau hidup tanpa mereka!! Kalo hidup rasanya sesakit ini...semenderita ini...Aysa...Aysa..." Ia menatapku. "AYSA NGGA MAU HIDUP!!!" <br/><br/>   Ia menutup wajahnya, tak kuasa membendung air mata yang terus jatuh, bersama jeritnya yang penuh luka. Penuh duka. Penuh murka. Yang melesat menembus kesunyian dan kegelapan malam.<br/><br/>   Aysa. Aku tau rasa itu. Saat adikku meninggal, aku juga sama sepertimu. Bagiku, dia duniaku, kebahagiaanku, alam semestaku. Aku tau rasanya kehilangan semua itu. Aku tau betapa sakitnya, betapa menderitanya, betapa tercabik-cabiknya hatimu saat ini.<br/><br/>   Ketika semua yang kau cintai direnggut darimu...dan sekejam itu...yang ada di benakmu hanyalah duka, amarah, kebencian, dan dendam. Dan tiada seorangpun yang bisa menolong.<br/><br/>   Aku tau! Aku tau itu!! Meski begitu, aku ingin menyelamatkanmu! Sebagaimana kau telah menyelamatkanku dulu...<br/><br/>   Aku memeluknya. Pelan. Agar tidak melukainya. Lembut. Agar menghapus kesedihannya. <br/><br/>"Fa...jri?" Lirihnya.<br/><br/>"Sekalipun masa lalumu adalah tragedi, dan itu membuatmu menderita. Aku akan selalu menerimamu dengan seluruh jiwa dan ragaku." Kataku. "Karena itu, jika kau tidak bisa hidup tanpa mereka. Hiduplah untukku!"<br/><br/>   Mendengar jawabanku, Aysa tersentak dan semakin menangis.<br/><br/>"Ngga adil..." Isaknya. "Ini ngga adil! Aysa cuma mau mati....Tapi kenapa Fajri mau Aysa menderita? Fajri bodoh! Fajri egois!" Ujarnya, memukul dadaku.<br/><br/>"Ya. Aku bodoh! Aku egois! Tapi selama itu bisa menolongmu. Aku tidak keberatan." <br/><br/>   Aysa pun menjerit dan menangis di pelukanku. Ia terus dan terus menangis. Membasahi kausku dengan air matanya yang hangat. Lebih hangat dari mentari. Dan lebih indah dari berlian. <br/><br/>   Bulan pun tersenyum. Bersama hembusan angin dan hamparan rumput yang tak hentinya menari-nari, gembira atas kedekatan kami.<br/><br/>"Aysa. Ayo rebut kerajaan kita." Kataku. "Dan balas orang yang membuatmu menderita."<br/><br/>   Ia mengangguk pelan di pelukanku.<br/><br/>"Jika ada dinding yang menghadang, akan kuhancurkan untukmu. Jika tidak ada jalan, akan kubuatkan untukmu. Akan kulakukan apapun untukmu." <br/><br/>   Ia kembali mengangguk. Lebih tenang dari sebelumnya. <br/><br/>   Ini yang terbaik. Apapun akan kulakukan. Demi Aysa. Dan mengembalikan senyumnya yang hilang.',options:{Page10:"*********"},_js_name:"_obj14",_types:["defaultobject"]},elementsNameMap.Page9=_obj14,allObjects.push(_obj14),objectsNameMap.Page9=_obj14,_obj15={elementtype:"object",name:"Page10",type:"object",description:'   Aku terus memeluk Aysa hingga ia tenang. Lalu, kami kembali ke persembunyian. Tempat Hans dan Grey menunggu.<br/><br/>"Fajri! Kemana aja sih lu?!" Ujar Grey, ia melihat Aysa dan memperbaiki sikapnya. "Ah! Tuan putri! Anda sudah siuman?"<br/><br/>   Tapi Aysa mengabaikannya dan berjalan menuju ranjang. <br/><br/>"Syukurlah. Kami sempet khawatir kalian diserang." Tawa Hans.<br/><br/>   Hans benar. Jika aku ingin melindungi Aysa, aku harus siap menghadapi apapun. Aku harus jadi kuat! Jauh lebih kuat dari ini! <br/><br/>   Aku pun membulatkan tekad dan menatap lurus mata hitam Hans. "Hans, aku punya permintaan."',options:{"Chapter 3":"Next Chapter"},_js_name:"_obj15",_types:["defaultobject"]},elementsNameMap.Page10=_obj15,allObjects.push(_obj15),objectsNameMap.Page10=_obj15,_obj16={elementtype:"object",name:"Chapter 3",type:"object",options:{"Game Over":"Play Again"},description:"Sedang Proses :v<br/><br/>Makasih udah main~ ",_js_name:"_obj16",_types:["defaultobject"]},elementsNameMap["Chapter 3"]=_obj16,allObjects.push(_obj16),objectsNameMap["Chapter 3"]=_obj16,_obj17={elementtype:"object",name:"Game Over",type:"object",script:function(){ClearScreen(),MovePlayer(_obj3)},_js_name:"_obj17",_types:["script","defaultobject"],runscriptonly:!0,description:""},elementsNameMap["Game Over"]=_obj17,allObjects.push(_obj17),objectsNameMap["Game Over"]=_obj17,_obj18={elementtype:"type",name:"defaultgame",_editorstyle:"gamebook",defaultfont:"Georgia, serif",defaultfontsize:12,defaultbackground:"White",defaultforeground:"Black",defaultlinkforeground:"Blue",menufont:"Arial",menufontsize:9,menubackground:"White",menuforeground:"Black",menuhoverbackground:"LightGrey",menuhoverforeground:"Black",description:"",setcustomwidth:!0,customwidth:700,setcustompadding:!1,custompaddingtop:30,custompaddingbottom:0,custompaddingleft:20,custompaddingright:20,showborder:!1,showtitle:!0,noclear:!1,clearlastpage:!1,deactivatecommandlinks:!1,_js_name:"_obj18",_types:[]},elementsNameMap.defaultgame=_obj18,allObjects.push(_obj18),objectsNameMap.defaultgame=_obj18,_obj19={elementtype:"type",name:"defaultobject",description:"",_js_name:"_obj19",_types:[]},elementsNameMap.defaultobject=_obj19,allObjects.push(_obj19),objectsNameMap.defaultobject=_obj19,_obj20={elementtype:"type",name:"defaultplayer",changedparent:function(){DoPage(_obj4.parent)},_js_name:"_obj20",_types:[]},elementsNameMap.defaultplayer=_obj20,allObjects.push(_obj20),objectsNameMap.defaultplayer=_obj20,_obj21={elementtype:"type",name:"picture",_js_name:"_obj21",_types:[]},elementsNameMap.picture=_obj21,allObjects.push(_obj21),objectsNameMap.picture=_obj21,_obj22={elementtype:"type",name:"youtube",_js_name:"_obj22",_types:[]},elementsNameMap.youtube=_obj22,allObjects.push(_obj22),objectsNameMap.youtube=_obj22,_obj23={elementtype:"type",name:"link",address:"http://",_js_name:"_obj23",_types:[]},elementsNameMap.link=_obj23,allObjects.push(_obj23),objectsNameMap.link=_obj23,_obj24={elementtype:"type",name:"script",runscriptonly:!0,_js_name:"_obj24",_types:[]},elementsNameMap.script=_obj24,allObjects.push(_obj24),objectsNameMap.script=_obj24,_obj25={elementtype:"type",name:"scripttext",runscript:!0,_js_name:"_obj25",_types:[]},elementsNameMap.scripttext=_obj25,allObjects.push(_obj25),objectsNameMap.scripttext=_obj25